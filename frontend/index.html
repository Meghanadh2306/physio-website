<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Hospital Admin Login</title>
<link rel="stylesheet"
 href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
:root{
  --primary:#0f766e;
  --secondary:#14b8a6;
  --card:#ffffff;
  --text:#1f2937;
}
*{box-sizing:border-box}

body{
  margin:0;
  height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  font-family:"Segoe UI",Arial;
  background:
    linear-gradient(rgba(230,242,241,.92),rgba(230,242,241,.92)),
    url("https://images.unsplash.com/photo-1586773860418-d37222d8fce3");
  background-size:cover;
}

/* CARD */
.card{
  max-width:380px;
  width:92%;
  background:var(--card);
  padding:32px;
  border-radius:20px;
  box-shadow:0 20px 40px rgba(0,0,0,.2);
  animation:fade .6s ease;
}
/* LOGO */
.logo{
  text-align:center;
  margin-bottom:20px;
}
.logo img{
  display:block;
  margin:0 auto;
  max-width:100%;
  height:auto;
}

.logo h2{
  margin:12px 0 0;
  color:var(--primary);
}
.logo p{
  margin:4px 0 0;
  font-size:13px;
  color:#555;
}

/* FORM */
input{
  width:100%;
  padding:12px;
  margin-top:14px;
  border-radius:8px;
  border:1px solid #ccc;
  font-size:14px;
}
button{
  width:100%;
  padding:12px;
  margin-top:18px;
  background:linear-gradient(135deg,var(--primary),var(--secondary));
  color:white;
  border:none;
  border-radius:10px;
  font-size:15px;
  font-weight:600;
  cursor:pointer;
}
button:hover{opacity:.95}

/* ERROR */
.error{
  color:#dc2626;
  text-align:center;
  margin-top:12px;
  font-size:14px;
}

/* FOOTER */
.footer{
  text-align:center;
  margin-top:18px;
  font-size:12px;
  color:#666;
}

/* ANIMATION */
@keyframes fade{
  from{opacity:0;transform:translateY(20px)}
  to{opacity:1;transform:none}
}
/* SLIDE ANIMATION */
.slide{
  animation:fadeSlide .45s ease;
}

@keyframes fadeSlide{
  from{opacity:0;transform:translateX(40px)}
  to{opacity:1;transform:none}
}
/* TOGGLE LINK */
.link{
  text-align:center;
  margin-top:12px;
  font-size:13px;
  color:var(--primary);
  cursor:pointer;
}
.link:hover{text-decoration:underline}

/* PASSWORD TOGGLE */
.pass-wrap{
  position:relative;
}
.eye{
  position:absolute;
  right:12px;
  top:50%;
  transform:translateY(-50%);
  cursor:pointer;
  font-size:14px;
  color:#555;
}
.pass-wrap input:focus + .eye{
  color:var(--primary);
}

</style>
</head>

<body>

<div class="card">

  <!-- REAL HOSPITAL LOGO -->
  <div class="logo">
<img
  src="http://localhost:5500/assets/logo.jpg">


    <h2>Sri Physiotherapy Clinic</h2>
    <p>Hospital Management System</p>
  </div>

  <!-- LOGIN FORM -->
<!-- LOGIN FORM -->
<div id="loginBox" class="slide">

  <input id="username" placeholder="Admin Username">

  <div class="pass-wrap">
    <input id="password" type="password" placeholder="Admin Password">
<span class="eye" onclick="togglePass('password',this)">
  <i class="fa-solid fa-eye"></i>
</span>
  </div>

  <button onclick="login()">Login</button>

  <div id="error" class="error"></div>
</div>
  <div class="footer">
    Â© 2026 Sri Physiotherapy Center
  </div>

</div>

<script>
const API = "http://localhost:5500";

async function login(){
  const u = username.value.trim();
  const p = password.value.trim();
  error.innerText = "";

  if(!u || !p){
    error.innerText = "Please enter username and password";
    return;
  }

  try{
    const res = await fetch(`${API}/login`,{
      method:"POST",
      headers:{ "Content-Type":"application/json" },
      body:JSON.stringify({ username:u, password:p })
    });

    const data = await res.json();

    if(!res.ok){
      error.innerText = data.message || "Invalid login";
      return;
    }

    localStorage.setItem("token", data.token);
    location.href = "/frontend/dashboard.html";

  }catch{
    error.innerText = "Server not reachable";
  }
}
function togglePass(id, el){
  const input = document.getElementById(id);
  const icon = el.querySelector("i");

  if(input.type === "password"){
    input.type = "text";
    icon.className = "fa-solid fa-eye-slash";
  }else{
    input.type = "password";
    icon.className = "fa-solid fa-eye";
  }
}
async function changePassword(){
  const token = localStorage.getItem("token");
  const oldPassword = oldPass.value;
  const newPassword = newPass.value;
if(!oldPassword || !newPassword || !confirmPass.value){
  alert("Fill all fields");
  return;
}
if(newPassword !== confirmPass.value){
  alert("Passwords do not match");
  return;
}
const res = await fetch(`${API}/admin/change-password`,{
  method:"POST",
  headers:{
    "Content-Type":"application/json",
    "Authorization": "Bearer " + token
  },
  body:JSON.stringify({ oldPassword, newPassword })
});
const data = await res.json();

if(!res.ok){
  alert(data.message || "Password change failed");
  return;
}
localStorage.removeItem("token");
alert("Password changed. Please login again.");
location.reload();

}
</script>
</body>
</html>
